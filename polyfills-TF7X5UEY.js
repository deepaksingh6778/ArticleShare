var ue=globalThis;function ne(s){return(ue.__Zone_symbol_prefix||"__zone_symbol__")+s}function At(){let s=ue.performance;function e(q){s&&s.mark&&s.mark(q)}function r(q,R){s&&s.measure&&s.measure(q,R)}e("Zone");let t=(()=>{class q{static __symbol__=ne;static assertZonePatched(){if(ue.Promise!==x.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let o=q.current;for(;o.parent;)o=o.parent;return o}static get current(){return O.zone}static get currentTask(){return H}static __load_patch(o,c,Z=!1){if(x.hasOwnProperty(o)){let j=ue[ne("forceDuplicateZoneCheck")]===!0;if(!Z&&j)throw Error("Already loaded patch: "+o)}else if(!ue["__Zone_disable_"+o]){let j="Zone:"+o;e(j),x[o]=c(ue,q,N),r(j,j)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(o,c){this._parent=o,this._name=c?c.name||"unnamed":"<root>",this._properties=c&&c.properties||{},this._zoneDelegate=new a(this,this._parent&&this._parent._zoneDelegate,c)}get(o){let c=this.getZoneWith(o);if(c)return c._properties[o]}getZoneWith(o){let c=this;for(;c;){if(c._properties.hasOwnProperty(o))return c;c=c._parent}return null}fork(o){if(!o)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,o)}wrap(o,c){if(typeof o!="function")throw new Error("Expecting function got: "+o);let Z=this._zoneDelegate.intercept(this,o,c),j=this;return function(){return j.runGuarded(Z,this,arguments,c)}}run(o,c,Z,j){O={parent:O,zone:this};try{return this._zoneDelegate.invoke(this,o,c,Z,j)}finally{O=O.parent}}runGuarded(o,c=null,Z,j){O={parent:O,zone:this};try{try{return this._zoneDelegate.invoke(this,o,c,Z,j)}catch(Y){if(this._zoneDelegate.handleError(this,Y))throw Y}}finally{O=O.parent}}runTask(o,c,Z){if(o.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(o.zone||I).name+"; Execution: "+this.name+")");let j=o,{type:Y,data:{isPeriodic:W=!1,isRefreshable:ye=!1}={}}=o;if(o.state===y&&(Y===V||Y===P))return;let he=o.state!=T;he&&j._transitionTo(T,i);let fe=H;H=j,O={parent:O,zone:this};try{Y==P&&o.data&&!W&&!ye&&(o.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,j,c,Z)}catch(se){if(this._zoneDelegate.handleError(this,se))throw se}}finally{let se=o.state;if(se!==y&&se!==p)if(Y==V||W||ye&&se===l)he&&j._transitionTo(i,T,l);else{let b=j._zoneDelegates;this._updateTaskCount(j,-1),he&&j._transitionTo(y,T,y),ye&&(j._zoneDelegates=b)}O=O.parent,H=fe}}scheduleTask(o){if(o.zone&&o.zone!==this){let Z=this;for(;Z;){if(Z===o.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${o.zone.name}`);Z=Z.parent}}o._transitionTo(l,y);let c=[];o._zoneDelegates=c,o._zone=this;try{o=this._zoneDelegate.scheduleTask(this,o)}catch(Z){throw o._transitionTo(p,l,y),this._zoneDelegate.handleError(this,Z),Z}return o._zoneDelegates===c&&this._updateTaskCount(o,1),o.state==l&&o._transitionTo(i,l),o}scheduleMicroTask(o,c,Z,j){return this.scheduleTask(new h(A,o,c,Z,j,void 0))}scheduleMacroTask(o,c,Z,j,Y){return this.scheduleTask(new h(P,o,c,Z,j,Y))}scheduleEventTask(o,c,Z,j,Y){return this.scheduleTask(new h(V,o,c,Z,j,Y))}cancelTask(o){if(o.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(o.zone||I).name+"; Execution: "+this.name+")");if(!(o.state!==i&&o.state!==T)){o._transitionTo(_,i,T);try{this._zoneDelegate.cancelTask(this,o)}catch(c){throw o._transitionTo(p,_),this._zoneDelegate.handleError(this,c),c}return this._updateTaskCount(o,-1),o._transitionTo(y,_),o.runCount=-1,o}}_updateTaskCount(o,c){let Z=o._zoneDelegates;c==-1&&(o._zoneDelegates=null);for(let j=0;j<Z.length;j++)Z[j]._updateTaskCount(o.type,c)}}return q})(),n={name:"",onHasTask:(q,R,o,c)=>q.hasTask(o,c),onScheduleTask:(q,R,o,c)=>q.scheduleTask(o,c),onInvokeTask:(q,R,o,c,Z,j)=>q.invokeTask(o,c,Z,j),onCancelTask:(q,R,o,c)=>q.cancelTask(o,c)};class a{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(R,o,c){this._zone=R,this._parentDelegate=o,this._forkZS=c&&(c&&c.onFork?c:o._forkZS),this._forkDlgt=c&&(c.onFork?o:o._forkDlgt),this._forkCurrZone=c&&(c.onFork?this._zone:o._forkCurrZone),this._interceptZS=c&&(c.onIntercept?c:o._interceptZS),this._interceptDlgt=c&&(c.onIntercept?o:o._interceptDlgt),this._interceptCurrZone=c&&(c.onIntercept?this._zone:o._interceptCurrZone),this._invokeZS=c&&(c.onInvoke?c:o._invokeZS),this._invokeDlgt=c&&(c.onInvoke?o:o._invokeDlgt),this._invokeCurrZone=c&&(c.onInvoke?this._zone:o._invokeCurrZone),this._handleErrorZS=c&&(c.onHandleError?c:o._handleErrorZS),this._handleErrorDlgt=c&&(c.onHandleError?o:o._handleErrorDlgt),this._handleErrorCurrZone=c&&(c.onHandleError?this._zone:o._handleErrorCurrZone),this._scheduleTaskZS=c&&(c.onScheduleTask?c:o._scheduleTaskZS),this._scheduleTaskDlgt=c&&(c.onScheduleTask?o:o._scheduleTaskDlgt),this._scheduleTaskCurrZone=c&&(c.onScheduleTask?this._zone:o._scheduleTaskCurrZone),this._invokeTaskZS=c&&(c.onInvokeTask?c:o._invokeTaskZS),this._invokeTaskDlgt=c&&(c.onInvokeTask?o:o._invokeTaskDlgt),this._invokeTaskCurrZone=c&&(c.onInvokeTask?this._zone:o._invokeTaskCurrZone),this._cancelTaskZS=c&&(c.onCancelTask?c:o._cancelTaskZS),this._cancelTaskDlgt=c&&(c.onCancelTask?o:o._cancelTaskDlgt),this._cancelTaskCurrZone=c&&(c.onCancelTask?this._zone:o._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let Z=c&&c.onHasTask,j=o&&o._hasTaskZS;(Z||j)&&(this._hasTaskZS=Z?c:n,this._hasTaskDlgt=o,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,c.onScheduleTask||(this._scheduleTaskZS=n,this._scheduleTaskDlgt=o,this._scheduleTaskCurrZone=this._zone),c.onInvokeTask||(this._invokeTaskZS=n,this._invokeTaskDlgt=o,this._invokeTaskCurrZone=this._zone),c.onCancelTask||(this._cancelTaskZS=n,this._cancelTaskDlgt=o,this._cancelTaskCurrZone=this._zone))}fork(R,o){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,R,o):new t(R,o)}intercept(R,o,c){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,R,o,c):o}invoke(R,o,c,Z,j){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,R,o,c,Z,j):o.apply(c,Z)}handleError(R,o){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,R,o):!0}scheduleTask(R,o){let c=o;if(this._scheduleTaskZS)this._hasTaskZS&&c._zoneDelegates.push(this._hasTaskDlgtOwner),c=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,R,o),c||(c=o);else if(o.scheduleFn)o.scheduleFn(o);else if(o.type==A)v(o);else throw new Error("Task is missing scheduleFn.");return c}invokeTask(R,o,c,Z){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,R,o,c,Z):o.callback.apply(c,Z)}cancelTask(R,o){let c;if(this._cancelTaskZS)c=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,R,o);else{if(!o.cancelFn)throw Error("Task is not cancelable");c=o.cancelFn(o)}return c}hasTask(R,o){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,R,o)}catch(c){this.handleError(R,c)}}_updateTaskCount(R,o){let c=this._taskCounts,Z=c[R],j=c[R]=Z+o;if(j<0)throw new Error("More tasks executed then were scheduled.");if(Z==0||j==0){let Y={microTask:c.microTask>0,macroTask:c.macroTask>0,eventTask:c.eventTask>0,change:R};this.hasTask(this._zone,Y)}}}class h{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(R,o,c,Z,j,Y){if(this.type=R,this.source=o,this.data=Z,this.scheduleFn=j,this.cancelFn=Y,!c)throw new Error("callback is not defined");this.callback=c;let W=this;R===V&&Z&&Z.useG?this.invoke=h.invokeTask:this.invoke=function(){return h.invokeTask.call(ue,W,this,arguments)}}static invokeTask(R,o,c){R||(R=this),te++;try{return R.runCount++,R.zone.runTask(R,o,c)}finally{te==1&&E(),te--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(y,l)}_transitionTo(R,o,c){if(this._state===o||this._state===c)this._state=R,R==y&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${R}', expecting state '${o}'${c?" or '"+c+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let d=ne("setTimeout"),f=ne("Promise"),S=ne("then"),m=[],C=!1,w;function M(q){if(w||ue[f]&&(w=ue[f].resolve(0)),w){let R=w[S];R||(R=w.then),R.call(w,q)}else ue[d](q,0)}function v(q){te===0&&m.length===0&&M(E),q&&m.push(q)}function E(){if(!C){for(C=!0;m.length;){let q=m;m=[];for(let R=0;R<q.length;R++){let o=q[R];try{o.zone.runTask(o,null,null)}catch(c){N.onUnhandledError(c)}}}N.microtaskDrainDone(),C=!1}}let I={name:"NO ZONE"},y="notScheduled",l="scheduling",i="scheduled",T="running",_="canceling",p="unknown",A="microTask",P="macroTask",V="eventTask",x={},N={symbol:ne,currentZoneFrame:()=>O,onUnhandledError:J,microtaskDrainDone:J,scheduleMicroTask:v,showUncaughtError:()=>!t[ne("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:J,patchMethod:()=>J,bindArguments:()=>[],patchThen:()=>J,patchMacroTask:()=>J,patchEventPrototype:()=>J,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>J,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>J,wrapWithCurrentZone:()=>J,filterProperties:()=>[],attachOriginToPatched:()=>J,_redefineProperty:()=>J,patchCallbacks:()=>J,nativeScheduleMicroTask:M},O={parent:null,zone:new t(null,null)},H=null,te=0;function J(){}return r("Zone","Zone"),t}function Rt(){let s=globalThis,e=s[ne("forceDuplicateZoneCheck")]===!0;if(s.Zone&&(e||typeof s.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return s.Zone??=At(),s.Zone}var we=Object.getOwnPropertyDescriptor,Ge=Object.defineProperty,We=Object.getPrototypeOf,It=Object.create,Dt=Array.prototype.slice,Ve="addEventListener",Qe="removeEventListener",He=ne(Ve),qe=ne(Qe),de="true",Te="false",Ce=ne("");function Be(s,e){return Zone.current.wrap(s,e)}function Xe(s,e,r,t,n){return Zone.current.scheduleMacroTask(s,e,r,t,n)}var Q=ne,Fe=typeof window<"u",Ae=Fe?window:void 0,K=Fe&&Ae||globalThis,Zt="removeAttribute";function $e(s,e){for(let r=s.length-1;r>=0;r--)typeof s[r]=="function"&&(s[r]=Be(s[r],e+"_"+r));return s}function Ft(s,e){let r=s.constructor.name;for(let t=0;t<e.length;t++){let n=e[t],a=s[n];if(a){let h=we(s,n);if(!ft(h))continue;s[n]=(d=>{let f=function(){return d.apply(this,$e(arguments,r+"."+n))};return _e(f,d),f})(a)}}}function ft(s){return s?s.writable===!1?!1:!(typeof s.get=="function"&&typeof s.set>"u"):!0}var dt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Oe=!("nw"in K)&&typeof K.process<"u"&&K.process.toString()==="[object process]",Je=!Oe&&!dt&&!!(Fe&&Ae.HTMLElement),Tt=typeof K.process<"u"&&K.process.toString()==="[object process]"&&!dt&&!!(Fe&&Ae.HTMLElement),Ze={},Ot=Q("enable_beforeunload"),ot=function(s){if(s=s||K.event,!s)return;let e=Ze[s.type];e||(e=Ze[s.type]=Q("ON_PROPERTY"+s.type));let r=this||s.target||K,t=r[e],n;if(Je&&r===Ae&&s.type==="error"){let a=s;n=t&&t.call(this,a.message,a.filename,a.lineno,a.colno,a.error),n===!0&&s.preventDefault()}else n=t&&t.apply(this,arguments),s.type==="beforeunload"&&K[Ot]&&typeof n=="string"?s.returnValue=n:n!=null&&!n&&s.preventDefault();return n};function ct(s,e,r){let t=we(s,e);if(!t&&r&&we(r,e)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;let n=Q("on"+e+"patched");if(s.hasOwnProperty(n)&&s[n])return;delete t.writable,delete t.value;let a=t.get,h=t.set,d=e.slice(2),f=Ze[d];f||(f=Ze[d]=Q("ON_PROPERTY"+d)),t.set=function(S){let m=this;if(!m&&s===K&&(m=K),!m)return;typeof m[f]=="function"&&m.removeEventListener(d,ot),h?.call(m,null),m[f]=S,typeof S=="function"&&m.addEventListener(d,ot,!1)},t.get=function(){let S=this;if(!S&&s===K&&(S=K),!S)return null;let m=S[f];if(m)return m;if(a){let C=a.call(this);if(C)return t.set.call(this,C),typeof S[Zt]=="function"&&S.removeAttribute(e),C}return null},Ge(s,e,t),s[n]=!0}function pt(s,e,r){if(e)for(let t=0;t<e.length;t++)ct(s,"on"+e[t],r);else{let t=[];for(let n in s)n.slice(0,2)=="on"&&t.push(n);for(let n=0;n<t.length;n++)ct(s,t[n],r)}}var oe=Q("originalInstance");function ve(s){let e=K[s];if(!e)return;K[Q(s)]=e,K[s]=function(){let n=$e(arguments,s);switch(n.length){case 0:this[oe]=new e;break;case 1:this[oe]=new e(n[0]);break;case 2:this[oe]=new e(n[0],n[1]);break;case 3:this[oe]=new e(n[0],n[1],n[2]);break;case 4:this[oe]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},_e(K[s],e);let r=new e(function(){}),t;for(t in r)s==="XMLHttpRequest"&&t==="responseBlob"||(function(n){typeof r[n]=="function"?K[s].prototype[n]=function(){return this[oe][n].apply(this[oe],arguments)}:Ge(K[s].prototype,n,{set:function(a){typeof a=="function"?(this[oe][n]=Be(a,s+"."+n),_e(this[oe][n],a)):this[oe][n]=a},get:function(){return this[oe][n]}})})(t);for(t in e)t!=="prototype"&&e.hasOwnProperty(t)&&(K[s][t]=e[t])}function pe(s,e,r){let t=s;for(;t&&!t.hasOwnProperty(e);)t=We(t);!t&&s[e]&&(t=s);let n=Q(e),a=null;if(t&&(!(a=t[n])||!t.hasOwnProperty(n))){a=t[n]=t[e];let h=t&&we(t,e);if(ft(h)){let d=r(a,n,e);t[e]=function(){return d(this,arguments)},_e(t[e],a)}}return a}function Mt(s,e,r){let t=null;function n(a){let h=a.data;return h.args[h.cbIdx]=function(){a.invoke.apply(this,arguments)},t.apply(h.target,h.args),a}t=pe(s,e,a=>function(h,d){let f=r(h,d);return f.cbIdx>=0&&typeof d[f.cbIdx]=="function"?Xe(f.name,d[f.cbIdx],f,n):a.apply(h,d)})}function _e(s,e){s[Q("OriginalDelegate")]=e}var at=!1,Ue=!1;function jt(){if(at)return Ue;at=!0;try{let s=Ae.navigator.userAgent;(s.indexOf("MSIE ")!==-1||s.indexOf("Trident/")!==-1||s.indexOf("Edge/")!==-1)&&(Ue=!0)}catch{}return Ue}function ut(s){return typeof s=="function"}function lt(s){return typeof s=="number"}var xt={useG:!0},re={},_t={},mt=new RegExp("^"+Ce+"(\\w+)(true|false)$"),yt=Q("propagationStopped");function kt(s,e){let r=(e?e(s):s)+Te,t=(e?e(s):s)+de,n=Ce+r,a=Ce+t;re[s]={},re[s][Te]=n,re[s][de]=a}function Nt(s,e,r,t){let n=t&&t.add||Ve,a=t&&t.rm||Qe,h=t&&t.listeners||"eventListeners",d=t&&t.rmAll||"removeAllListeners",f=Q(n),S="."+n+":",m="prependListener",C="."+m+":",w=function(l,i,T){if(l.isRemoved)return;let _=l.callback;typeof _=="object"&&_.handleEvent&&(l.callback=P=>_.handleEvent(P),l.originalDelegate=_);let p;try{l.invoke(l,i,[T])}catch(P){p=P}let A=l.options;if(A&&typeof A=="object"&&A.once){let P=l.originalDelegate?l.originalDelegate:l.callback;i[a].call(i,T.type,P,A)}return p};function M(l,i,T){if(i=i||s.event,!i)return;let _=l||i.target||s,p=_[re[i.type][T?de:Te]];if(p){let A=[];if(p.length===1){let P=w(p[0],_,i);P&&A.push(P)}else{let P=p.slice();for(let V=0;V<P.length&&!(i&&i[yt]===!0);V++){let x=w(P[V],_,i);x&&A.push(x)}}if(A.length===1)throw A[0];for(let P=0;P<A.length;P++){let V=A[P];e.nativeScheduleMicroTask(()=>{throw V})}}}let v=function(l){return M(this,l,!1)},E=function(l){return M(this,l,!0)};function I(l,i){if(!l)return!1;let T=!0;i&&i.useG!==void 0&&(T=i.useG);let _=i&&i.vh,p=!0;i&&i.chkDup!==void 0&&(p=i.chkDup);let A=!1;i&&i.rt!==void 0&&(A=i.rt);let P=l;for(;P&&!P.hasOwnProperty(n);)P=We(P);if(!P&&l[n]&&(P=l),!P||P[f])return!1;let V=i&&i.eventNameToString,x={},N=P[f]=P[n],O=P[Q(a)]=P[a],H=P[Q(h)]=P[h],te=P[Q(d)]=P[d],J;i&&i.prepend&&(J=P[Q(i.prepend)]=P[i.prepend]);function q(u,g){return g?typeof u=="boolean"?{capture:u,passive:!0}:u?typeof u=="object"&&u.passive!==!1?{...u,passive:!0}:u:{passive:!0}:u}let R=function(u){if(!x.isExisting)return N.call(x.target,x.eventName,x.capture?E:v,x.options)},o=function(u){if(!u.isRemoved){let g=re[u.eventName],F;g&&(F=g[u.capture?de:Te]);let L=F&&u.target[F];if(L){for(let D=0;D<L.length;D++)if(L[D]===u){L.splice(D,1),u.isRemoved=!0,u.removeAbortListener&&(u.removeAbortListener(),u.removeAbortListener=null),L.length===0&&(u.allRemoved=!0,u.target[F]=null);break}}}if(u.allRemoved)return O.call(u.target,u.eventName,u.capture?E:v,u.options)},c=function(u){return N.call(x.target,x.eventName,u.invoke,x.options)},Z=function(u){return J.call(x.target,x.eventName,u.invoke,x.options)},j=function(u){return O.call(u.target,u.eventName,u.invoke,u.options)},Y=T?R:c,W=T?o:j,ye=function(u,g){let F=typeof g;return F==="function"&&u.callback===g||F==="object"&&u.originalDelegate===g},he=i?.diff||ye,fe=Zone[Q("UNPATCHED_EVENTS")],se=s[Q("PASSIVE_EVENTS")];function b(u){if(typeof u=="object"&&u!==null){let g={...u};return u.signal&&(g.signal=u.signal),g}return u}let k=function(u,g,F,L,D=!1,U=!1){return function(){let z=this||s,G=arguments[0];i&&i.transferEventName&&(G=i.transferEventName(G));let B=arguments[1];if(!B)return u.apply(this,arguments);if(Oe&&G==="uncaughtException")return u.apply(this,arguments);let X=!1;if(typeof B!="function"){if(!B.handleEvent)return u.apply(this,arguments);X=!0}if(_&&!_(u,B,z,arguments))return;let ke=!!se&&se.indexOf(G)!==-1,ce=b(q(arguments[2],ke)),Ee=ce?.signal;if(Ee?.aborted)return;if(fe){for(let ae=0;ae<fe.length;ae++)if(G===fe[ae])return ke?u.call(z,G,B,ce):u.apply(this,arguments)}let Ne=ce?typeof ce=="boolean"?!0:ce.capture:!1,tt=ce&&typeof ce=="object"?ce.once:!1,Ct=Zone.current,Le=re[G];Le||(kt(G,V),Le=re[G]);let nt=Le[Ne?de:Te],be=z[nt],rt=!1;if(be){if(rt=!0,p){for(let ae=0;ae<be.length;ae++)if(he(be[ae],B))return}}else be=z[nt]=[];let Ie,st=z.constructor.name,it=_t[st];it&&(Ie=it[G]),Ie||(Ie=st+g+(V?V(G):G)),x.options=ce,tt&&(x.options.once=!1),x.target=z,x.capture=Ne,x.eventName=G,x.isExisting=rt;let Pe=T?xt:void 0;Pe&&(Pe.taskData=x),Ee&&(x.options.signal=void 0);let ie=Ct.scheduleEventTask(Ie,B,Pe,F,L);if(Ee){x.options.signal=Ee;let ae=()=>ie.zone.cancelTask(ie);u.call(Ee,"abort",ae,{once:!0}),ie.removeAbortListener=()=>Ee.removeEventListener("abort",ae)}if(x.target=null,Pe&&(Pe.taskData=null),tt&&(x.options.once=!0),typeof ie.options!="boolean"&&(ie.options=ce),ie.target=z,ie.capture=Ne,ie.eventName=G,X&&(ie.originalDelegate=B),U?be.unshift(ie):be.push(ie),D)return z}};return P[n]=k(N,S,Y,W,A),J&&(P[m]=k(J,C,Z,W,A,!0)),P[a]=function(){let u=this||s,g=arguments[0];i&&i.transferEventName&&(g=i.transferEventName(g));let F=arguments[2],L=F?typeof F=="boolean"?!0:F.capture:!1,D=arguments[1];if(!D)return O.apply(this,arguments);if(_&&!_(O,D,u,arguments))return;let U=re[g],z;U&&(z=U[L?de:Te]);let G=z&&u[z];if(G)for(let B=0;B<G.length;B++){let X=G[B];if(he(X,D)){if(G.splice(B,1),X.isRemoved=!0,G.length===0&&(X.allRemoved=!0,u[z]=null,!L&&typeof g=="string")){let ke=Ce+"ON_PROPERTY"+g;u[ke]=null}return X.zone.cancelTask(X),A?u:void 0}}return O.apply(this,arguments)},P[h]=function(){let u=this||s,g=arguments[0];i&&i.transferEventName&&(g=i.transferEventName(g));let F=[],L=gt(u,V?V(g):g);for(let D=0;D<L.length;D++){let U=L[D],z=U.originalDelegate?U.originalDelegate:U.callback;F.push(z)}return F},P[d]=function(){let u=this||s,g=arguments[0];if(g){i&&i.transferEventName&&(g=i.transferEventName(g));let F=re[g];if(F){let L=F[Te],D=F[de],U=u[L],z=u[D];if(U){let G=U.slice();for(let B=0;B<G.length;B++){let X=G[B],ke=X.originalDelegate?X.originalDelegate:X.callback;this[a].call(this,g,ke,X.options)}}if(z){let G=z.slice();for(let B=0;B<G.length;B++){let X=G[B],ke=X.originalDelegate?X.originalDelegate:X.callback;this[a].call(this,g,ke,X.options)}}}}else{let F=Object.keys(u);for(let L=0;L<F.length;L++){let D=F[L],U=mt.exec(D),z=U&&U[1];z&&z!=="removeListener"&&this[d].call(this,z)}this[d].call(this,"removeListener")}if(A)return this},_e(P[n],N),_e(P[a],O),te&&_e(P[d],te),H&&_e(P[h],H),!0}let y=[];for(let l=0;l<r.length;l++)y[l]=I(r[l],t);return y}function gt(s,e){if(!e){let a=[];for(let h in s){let d=mt.exec(h),f=d&&d[1];if(f&&(!e||f===e)){let S=s[h];if(S)for(let m=0;m<S.length;m++)a.push(S[m])}}return a}let r=re[e];r||(kt(e),r=re[e]);let t=s[r[Te]],n=s[r[de]];return t?n?t.concat(n):t.slice():n?n.slice():[]}function Lt(s,e){let r=s.Event;r&&r.prototype&&e.patchMethod(r.prototype,"stopImmediatePropagation",t=>function(n,a){n[yt]=!0,t&&t.apply(n,a)})}function Ht(s,e){e.patchMethod(s,"queueMicrotask",r=>function(t,n){Zone.current.scheduleMicroTask("queueMicrotask",n[0])})}var De=Q("zoneTask");function Se(s,e,r,t){let n=null,a=null;e+=t,r+=t;let h={};function d(S){let m=S.data;m.args[0]=function(){return S.invoke.apply(this,arguments)};let C=n.apply(s,m.args);return lt(C)?m.handleId=C:(m.handle=C,m.isRefreshable=ut(C.refresh)),S}function f(S){let{handle:m,handleId:C}=S.data;return a.call(s,m??C)}n=pe(s,e,S=>function(m,C){if(ut(C[0])){let w={isRefreshable:!1,isPeriodic:t==="Interval",delay:t==="Timeout"||t==="Interval"?C[1]||0:void 0,args:C},M=C[0];C[0]=function(){try{return M.apply(this,arguments)}finally{let{handle:T,handleId:_,isPeriodic:p,isRefreshable:A}=w;!p&&!A&&(_?delete h[_]:T&&(T[De]=null))}};let v=Xe(e,C[0],w,d,f);if(!v)return v;let{handleId:E,handle:I,isRefreshable:y,isPeriodic:l}=v.data;if(E)h[E]=v;else if(I&&(I[De]=v,y&&!l)){let i=I.refresh;I.refresh=function(){let{zone:T,state:_}=v;return _==="notScheduled"?(v._state="scheduled",T._updateTaskCount(v,1)):_==="running"&&(v._state="scheduling"),i.call(this)}}return I??E??v}else return S.apply(s,C)}),a=pe(s,r,S=>function(m,C){let w=C[0],M;lt(w)?(M=h[w],delete h[w]):(M=w?.[De],M?w[De]=null:M=w),M?.type?M.cancelFn&&M.zone.cancelTask(M):S.apply(s,C)})}function qt(s,e){let{isBrowser:r,isMix:t}=e.getGlobalObjects();if(!r&&!t||!s.customElements||!("customElements"in s))return;let n=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,s.customElements,"customElements","define",n)}function Ut(s,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:r,zoneSymbolEventNames:t,TRUE_STR:n,FALSE_STR:a,ZONE_SYMBOL_PREFIX:h}=e.getGlobalObjects();for(let f=0;f<r.length;f++){let S=r[f],m=S+a,C=S+n,w=h+m,M=h+C;t[S]={},t[S][a]=w,t[S][n]=M}let d=s.EventTarget;if(!(!d||!d.prototype))return e.patchEventTarget(s,e,[d&&d.prototype]),!0}function zt(s,e){e.patchEventPrototype(s,e)}function Et(s,e,r){if(!r||r.length===0)return e;let t=r.filter(a=>a.target===s);if(t.length===0)return e;let n=t[0].ignoreProperties;return e.filter(a=>n.indexOf(a)===-1)}function ht(s,e,r,t){if(!s)return;let n=Et(s,e,r);pt(s,n,t)}function ze(s){return Object.getOwnPropertyNames(s).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Gt(s,e){if(Oe&&!Tt||Zone[s.symbol("patchEvents")])return;let r=e.__Zone_ignore_on_properties,t=[];if(Je){let n=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let a=[];ht(n,ze(n),r&&r.concat(a),We(n))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let n=0;n<t.length;n++){let a=e[t[n]];a?.prototype&&ht(a.prototype,ze(a.prototype),r)}}function Wt(s){s.__load_patch("legacy",e=>{let r=e[s.__symbol__("legacyPatch")];r&&r()}),s.__load_patch("timers",e=>{let t="clear";Se(e,"set",t,"Timeout"),Se(e,"set",t,"Interval"),Se(e,"set",t,"Immediate")}),s.__load_patch("requestAnimationFrame",e=>{Se(e,"request","cancel","AnimationFrame"),Se(e,"mozRequest","mozCancel","AnimationFrame"),Se(e,"webkitRequest","webkitCancel","AnimationFrame")}),s.__load_patch("blocking",(e,r)=>{let t=["alert","prompt","confirm"];for(let n=0;n<t.length;n++){let a=t[n];pe(e,a,(h,d,f)=>function(S,m){return r.current.run(h,e,m,f)})}}),s.__load_patch("EventTarget",(e,r,t)=>{zt(e,t),Ut(e,t);let n=e.XMLHttpRequestEventTarget;n&&n.prototype&&t.patchEventTarget(e,t,[n.prototype])}),s.__load_patch("MutationObserver",(e,r,t)=>{ve("MutationObserver"),ve("WebKitMutationObserver")}),s.__load_patch("IntersectionObserver",(e,r,t)=>{ve("IntersectionObserver")}),s.__load_patch("FileReader",(e,r,t)=>{ve("FileReader")}),s.__load_patch("on_property",(e,r,t)=>{Gt(t,e)}),s.__load_patch("customElements",(e,r,t)=>{qt(e,t)}),s.__load_patch("XHR",(e,r)=>{S(e);let t=Q("xhrTask"),n=Q("xhrSync"),a=Q("xhrListener"),h=Q("xhrScheduled"),d=Q("xhrURL"),f=Q("xhrErrorBeforeScheduled");function S(m){let C=m.XMLHttpRequest;if(!C)return;let w=C.prototype;function M(N){return N[t]}let v=w[He],E=w[qe];if(!v){let N=m.XMLHttpRequestEventTarget;if(N){let O=N.prototype;v=O[He],E=O[qe]}}let I="readystatechange",y="scheduled";function l(N){let O=N.data,H=O.target;H[h]=!1,H[f]=!1;let te=H[a];v||(v=H[He],E=H[qe]),te&&E.call(H,I,te);let J=H[a]=()=>{if(H.readyState===H.DONE)if(!O.aborted&&H[h]&&N.state===y){let R=H[r.__symbol__("loadfalse")];if(H.status!==0&&R&&R.length>0){let o=N.invoke;N.invoke=function(){let c=H[r.__symbol__("loadfalse")];for(let Z=0;Z<c.length;Z++)c[Z]===N&&c.splice(Z,1);!O.aborted&&N.state===y&&o.call(N)},R.push(N)}else N.invoke()}else!O.aborted&&H[h]===!1&&(H[f]=!0)};return v.call(H,I,J),H[t]||(H[t]=N),V.apply(H,O.args),H[h]=!0,N}function i(){}function T(N){let O=N.data;return O.aborted=!0,x.apply(O.target,O.args)}let _=pe(w,"open",()=>function(N,O){return N[n]=O[2]==!1,N[d]=O[1],_.apply(N,O)}),p="XMLHttpRequest.send",A=Q("fetchTaskAborting"),P=Q("fetchTaskScheduling"),V=pe(w,"send",()=>function(N,O){if(r.current[P]===!0||N[n])return V.apply(N,O);{let H={target:N,url:N[d],isPeriodic:!1,args:O,aborted:!1},te=Xe(p,i,H,l,T);N&&N[f]===!0&&!H.aborted&&te.state===y&&te.invoke()}}),x=pe(w,"abort",()=>function(N,O){let H=M(N);if(H&&typeof H.type=="string"){if(H.cancelFn==null||H.data&&H.data.aborted)return;H.zone.cancelTask(H)}else if(r.current[A]===!0)return x.apply(N,O)})}}),s.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Ft(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),s.__load_patch("PromiseRejectionEvent",(e,r)=>{function t(n){return function(a){gt(e,n).forEach(d=>{let f=e.PromiseRejectionEvent;if(f){let S=new f(n,{promise:a.promise,reason:a.rejection});d.invoke(S)}})}}e.PromiseRejectionEvent&&(r[Q("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),r[Q("rejectionHandledHandler")]=t("rejectionhandled"))}),s.__load_patch("queueMicrotask",(e,r,t)=>{Ht(e,t)})}function Vt(s){s.__load_patch("ZoneAwarePromise",(e,r,t)=>{let n=Object.getOwnPropertyDescriptor,a=Object.defineProperty;function h(b){if(b&&b.toString===Object.prototype.toString){let k=b.constructor&&b.constructor.name;return(k||"")+": "+JSON.stringify(b)}return b?b.toString():Object.prototype.toString.call(b)}let d=t.symbol,f=[],S=e[d("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,m=d("Promise"),C=d("then"),w="__creationTrace__";t.onUnhandledError=b=>{if(t.showUncaughtError()){let k=b&&b.rejection;k?console.error("Unhandled Promise rejection:",k instanceof Error?k.message:k,"; Zone:",b.zone.name,"; Task:",b.task&&b.task.source,"; Value:",k,k instanceof Error?k.stack:void 0):console.error(b)}},t.microtaskDrainDone=()=>{for(;f.length;){let b=f.shift();try{b.zone.runGuarded(()=>{throw b.throwOriginal?b.rejection:b})}catch(k){v(k)}}};let M=d("unhandledPromiseRejectionHandler");function v(b){t.onUnhandledError(b);try{let k=r[M];typeof k=="function"&&k.call(this,b)}catch{}}function E(b){return b&&typeof b.then=="function"}function I(b){return b}function y(b){return W.reject(b)}let l=d("state"),i=d("value"),T=d("finally"),_=d("parentPromiseValue"),p=d("parentPromiseState"),A="Promise.then",P=null,V=!0,x=!1,N=0;function O(b,k){return u=>{try{q(b,k,u)}catch(g){q(b,!1,g)}}}let H=function(){let b=!1;return function(u){return function(){b||(b=!0,u.apply(null,arguments))}}},te="Promise resolved with itself",J=d("currentTaskTrace");function q(b,k,u){let g=H();if(b===u)throw new TypeError(te);if(b[l]===P){let F=null;try{(typeof u=="object"||typeof u=="function")&&(F=u&&u.then)}catch(L){return g(()=>{q(b,!1,L)})(),b}if(k!==x&&u instanceof W&&u.hasOwnProperty(l)&&u.hasOwnProperty(i)&&u[l]!==P)o(u),q(b,u[l],u[i]);else if(k!==x&&typeof F=="function")try{F.call(u,g(O(b,k)),g(O(b,!1)))}catch(L){g(()=>{q(b,!1,L)})()}else{b[l]=k;let L=b[i];if(b[i]=u,b[T]===T&&k===V&&(b[l]=b[p],b[i]=b[_]),k===x&&u instanceof Error){let D=r.currentTask&&r.currentTask.data&&r.currentTask.data[w];D&&a(u,J,{configurable:!0,enumerable:!1,writable:!0,value:D})}for(let D=0;D<L.length;)c(b,L[D++],L[D++],L[D++],L[D++]);if(L.length==0&&k==x){b[l]=N;let D=u;try{throw new Error("Uncaught (in promise): "+h(u)+(u&&u.stack?`
`+u.stack:""))}catch(U){D=U}S&&(D.throwOriginal=!0),D.rejection=u,D.promise=b,D.zone=r.current,D.task=r.currentTask,f.push(D),t.scheduleMicroTask()}}}return b}let R=d("rejectionHandledHandler");function o(b){if(b[l]===N){try{let k=r[R];k&&typeof k=="function"&&k.call(this,{rejection:b[i],promise:b})}catch{}b[l]=x;for(let k=0;k<f.length;k++)b===f[k].promise&&f.splice(k,1)}}function c(b,k,u,g,F){o(b);let L=b[l],D=L?typeof g=="function"?g:I:typeof F=="function"?F:y;k.scheduleMicroTask(A,()=>{try{let U=b[i],z=!!u&&T===u[T];z&&(u[_]=U,u[p]=L);let G=k.run(D,void 0,z&&D!==y&&D!==I?[]:[U]);q(u,!0,G)}catch(U){q(u,!1,U)}},u)}let Z="function ZoneAwarePromise() { [native code] }",j=function(){},Y=e.AggregateError;class W{static toString(){return Z}static resolve(k){return k instanceof W?k:q(new this(null),V,k)}static reject(k){return q(new this(null),x,k)}static withResolvers(){let k={};return k.promise=new W((u,g)=>{k.resolve=u,k.reject=g}),k}static any(k){if(!k||typeof k[Symbol.iterator]!="function")return Promise.reject(new Y([],"All promises were rejected"));let u=[],g=0;try{for(let D of k)g++,u.push(W.resolve(D))}catch{return Promise.reject(new Y([],"All promises were rejected"))}if(g===0)return Promise.reject(new Y([],"All promises were rejected"));let F=!1,L=[];return new W((D,U)=>{for(let z=0;z<u.length;z++)u[z].then(G=>{F||(F=!0,D(G))},G=>{L.push(G),g--,g===0&&(F=!0,U(new Y(L,"All promises were rejected")))})})}static race(k){let u,g,F=new this((U,z)=>{u=U,g=z});function L(U){u(U)}function D(U){g(U)}for(let U of k)E(U)||(U=this.resolve(U)),U.then(L,D);return F}static all(k){return W.allWithCallback(k)}static allSettled(k){return(this&&this.prototype instanceof W?this:W).allWithCallback(k,{thenCallback:g=>({status:"fulfilled",value:g}),errorCallback:g=>({status:"rejected",reason:g})})}static allWithCallback(k,u){let g,F,L=new this((G,B)=>{g=G,F=B}),D=2,U=0,z=[];for(let G of k){E(G)||(G=this.resolve(G));let B=U;try{G.then(X=>{z[B]=u?u.thenCallback(X):X,D--,D===0&&g(z)},X=>{u?(z[B]=u.errorCallback(X),D--,D===0&&g(z)):F(X)})}catch(X){F(X)}D++,U++}return D-=2,D===0&&g(z),L}constructor(k){let u=this;if(!(u instanceof W))throw new Error("Must be an instanceof Promise.");u[l]=P,u[i]=[];try{let g=H();k&&k(g(O(u,V)),g(O(u,x)))}catch(g){q(u,!1,g)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return W}then(k,u){let g=this.constructor?.[Symbol.species];(!g||typeof g!="function")&&(g=this.constructor||W);let F=new g(j),L=r.current;return this[l]==P?this[i].push(L,F,k,u):c(this,L,F,k,u),F}catch(k){return this.then(null,k)}finally(k){let u=this.constructor?.[Symbol.species];(!u||typeof u!="function")&&(u=W);let g=new u(j);g[T]=T;let F=r.current;return this[l]==P?this[i].push(F,g,k,k):c(this,F,g,k,k),g}}W.resolve=W.resolve,W.reject=W.reject,W.race=W.race,W.all=W.all;let ye=e[m]=e.Promise;e.Promise=W;let he=d("thenPatched");function fe(b){let k=b.prototype,u=n(k,"then");if(u&&(u.writable===!1||!u.configurable))return;let g=k.then;k[C]=g,b.prototype.then=function(F,L){return new W((U,z)=>{g.call(this,U,z)}).then(F,L)},b[he]=!0}t.patchThen=fe;function se(b){return function(k,u){let g=b.apply(k,u);if(g instanceof W)return g;let F=g.constructor;return F[he]||fe(F),g}}return ye&&(fe(ye),pe(e,"fetch",b=>se(b))),Promise[r.__symbol__("uncaughtPromiseErrors")]=f,W})}function Qt(s){s.__load_patch("toString",e=>{let r=Function.prototype.toString,t=Q("OriginalDelegate"),n=Q("Promise"),a=Q("Error"),h=function(){if(typeof this=="function"){let m=this[t];if(m)return typeof m=="function"?r.call(m):Object.prototype.toString.call(m);if(this===Promise){let C=e[n];if(C)return r.call(C)}if(this===Error){let C=e[a];if(C)return r.call(C)}}return r.call(this)};h[t]=r,Function.prototype.toString=h;let d=Object.prototype.toString,f="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?f:d.call(this)}})}function Bt(s,e,r,t,n){let a=Zone.__symbol__(t);if(e[a])return;let h=e[a]=e[t];e[t]=function(d,f,S){return f&&f.prototype&&n.forEach(function(m){let C=`${r}.${t}::`+m,w=f.prototype;try{if(w.hasOwnProperty(m)){let M=s.ObjectGetOwnPropertyDescriptor(w,m);M&&M.value?(M.value=s.wrapWithCurrentZone(M.value,C),s._redefineProperty(f.prototype,m,M)):w[m]&&(w[m]=s.wrapWithCurrentZone(w[m],C))}else w[m]&&(w[m]=s.wrapWithCurrentZone(w[m],C))}catch{}}),h.call(e,d,f,S)},s.attachOriginToPatched(e[t],h)}function Xt(s){s.__load_patch("util",(e,r,t)=>{let n=ze(e);t.patchOnProperties=pt,t.patchMethod=pe,t.bindArguments=$e,t.patchMacroTask=Mt;let a=r.__symbol__("BLACK_LISTED_EVENTS"),h=r.__symbol__("UNPATCHED_EVENTS");e[h]&&(e[a]=e[h]),e[a]&&(r[a]=r[h]=e[a]),t.patchEventPrototype=Lt,t.patchEventTarget=Nt,t.isIEOrEdge=jt,t.ObjectDefineProperty=Ge,t.ObjectGetOwnPropertyDescriptor=we,t.ObjectCreate=It,t.ArraySlice=Dt,t.patchClass=ve,t.wrapWithCurrentZone=Be,t.filterProperties=Et,t.attachOriginToPatched=_e,t._redefineProperty=Object.defineProperty,t.patchCallbacks=Bt,t.getGlobalObjects=()=>({globalSources:_t,zoneSymbolEventNames:re,eventNames:n,isBrowser:Je,isMix:Tt,isNode:Oe,TRUE_STR:de,FALSE_STR:Te,ZONE_SYMBOL_PREFIX:Ce,ADD_EVENT_LISTENER_STR:Ve,REMOVE_EVENT_LISTENER_STR:Qe})})}function $t(s){Vt(s),Qt(s),Xt(s)}var bt=Rt();$t(bt);Wt(bt);function Jt(s){s.__load_patch("jasmine",(e,r,t)=>{let n=function(y,l){for(let T in l)l.hasOwnProperty(T)&&(y[T]=l[T]);function i(){this.constructor=y}y.prototype=l===null?Object.create(l):(i.prototype=l.prototype,new i)};if(!r)throw new Error("Missing: zone.js");if(typeof jest<"u"||typeof jasmine>"u"||jasmine.__zone_patch__)return;jasmine.__zone_patch__=!0;let a=r.SyncTestZoneSpec,h=r.ProxyZoneSpec;if(!a)throw new Error("Missing: SyncTestZoneSpec");if(!h)throw new Error("Missing: ProxyZoneSpec");let d=r.current,f=r.__symbol__,S=e[f("fakeAsyncDisablePatchingClock")]===!0,m=!S&&(e[f("fakeAsyncPatchLock")]===!0||e[f("fakeAsyncAutoFakeAsyncWhenClockPatched")]===!0);if(!(e[f("ignoreUnhandledRejection")]===!0)){let y=jasmine.GlobalErrors;y&&!jasmine[f("GlobalErrors")]&&(jasmine[f("GlobalErrors")]=y,jasmine.GlobalErrors=function(){let l=new y,i=l.install;return i&&!l[f("install")]&&(l[f("install")]=i,l.install=function(){let T=typeof process<"u"&&!!process.on,_=T?process.listeners("unhandledRejection"):e.eventListeners("unhandledrejection"),p=i.apply(this,arguments);return T?process.removeAllListeners("unhandledRejection"):e.removeAllListeners("unhandledrejection"),_&&_.forEach(A=>{T?process.on("unhandledRejection",A):e.addEventListener("unhandledrejection",A)}),p}),l})}let w=jasmine.getEnv();if(["describe","xdescribe","fdescribe"].forEach(y=>{let l=w[y];w[y]=function(i,T){return l.call(this,i,M(i,T))}}),["it","xit","fit"].forEach(y=>{let l=w[y];w[f(y)]=l,w[y]=function(i,T,_){return arguments[1]=E(T),l.apply(this,arguments)}}),["beforeEach","afterEach","beforeAll","afterAll"].forEach(y=>{let l=w[y];w[f(y)]=l,w[y]=function(i,T){return arguments[0]=E(i),l.apply(this,arguments)}}),!S){let y=jasmine[f("clock")]=jasmine.clock;jasmine.clock=function(){let l=y.apply(this,arguments);if(!l[f("patched")]){l[f("patched")]=f("patched");let i=l[f("tick")]=l.tick;l.tick=function(){let _=r.current.get("FakeAsyncTestZoneSpec");return _?_.tick.apply(_,arguments):i.apply(this,arguments)};let T=l[f("mockDate")]=l.mockDate;l.mockDate=function(){let _=r.current.get("FakeAsyncTestZoneSpec");if(_){let p=arguments.length>0?arguments[0]:new Date;return _.setFakeBaseSystemTime.apply(_,p&&typeof p.getTime=="function"?[p.getTime()]:arguments)}return T.apply(this,arguments)},m&&["install","uninstall"].forEach(_=>{let p=l[f(_)]=l[_];l[_]=function(){if(r.FakeAsyncTestZoneSpec){jasmine[f("clockInstalled")]=_==="install";return}return p.apply(this,arguments)}})}return l}}if(!jasmine[r.__symbol__("createSpyObj")]){let y=jasmine.createSpyObj;jasmine[r.__symbol__("createSpyObj")]=y,jasmine.createSpyObj=function(){let l=Array.prototype.slice.call(arguments),i=l.length>=3?l[2]:null,T;if(i){let _=Object.defineProperty;Object.defineProperty=function(p,A,P){return _.call(this,p,A,{...P,configurable:!0,enumerable:!0})};try{T=y.apply(this,l)}finally{Object.defineProperty=_}}else T=y.apply(this,l);return T}}function M(y,l){return function(){return d.fork(new a(`jasmine.describe#${y}`)).run(l,this,arguments)}}function v(y,l,i,T){let _=!!jasmine[f("clockInstalled")];i.testProxyZoneSpec;let p=i.testProxyZone;if(_&&m){let A=r[r.__symbol__("fakeAsyncTest")];A&&typeof A.fakeAsync=="function"&&(y=A.fakeAsync(y))}return T?p.run(y,l,[T]):p.run(y,l)}function E(y){return y&&(y.length?function(l){return v(y,this,this.queueRunner,l)}:function(){return v(y,this,this.queueRunner)})}let I=jasmine.QueueRunner;jasmine.QueueRunner=(function(y){n(l,y);function l(i){i.onComplete&&(i.onComplete=(A=>()=>{this.testProxyZone=null,this.testProxyZoneSpec=null,d.scheduleMicroTask("jasmine.onComplete",A)})(i.onComplete));let T=e[r.__symbol__("setTimeout")],_=e[r.__symbol__("clearTimeout")];T&&(i.timeout={setTimeout:T||e.setTimeout,clearTimeout:_||e.clearTimeout}),jasmine.UserContext?(i.userContext||(i.userContext=new jasmine.UserContext),i.userContext.queueRunner=this):(i.userContext||(i.userContext={}),i.userContext.queueRunner=this);let p=i.onException;i.onException=function(A){if(A&&A.message==="Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL."){let P=this&&this.testProxyZoneSpec;if(P){let V=P.getAndClearPendingTasksInfo();try{A.message+=V}catch{}}}p&&p.call(this,A)},y.call(this,i)}return l.prototype.execute=function(){let i=r.current,T=!1;for(;i;){if(i===d){T=!0;break}i=i.parent}if(!T)throw new Error("Unexpected Zone: "+r.current.name);this.testProxyZoneSpec=new h,this.testProxyZone=d.fork(this.testProxyZoneSpec),r.currentTask?y.prototype.execute.call(this):r.current.scheduleMicroTask("jasmine.execute().forceTask",()=>I.prototype.execute.call(this))},l})(I)})}function Yt(s){s.__load_patch("jest",(e,r,t)=>{if(typeof jest>"u"||jest.__zone_patch__)return;r[t.symbol("ignoreConsoleErrorUncaughtError")]=!0,jest.__zone_patch__=!0;let n=r.ProxyZoneSpec,a=r.SyncTestZoneSpec;if(!n)throw new Error("Missing ProxyZoneSpec");let h=r.current,d=h.fork(new a("jest.describe")),f=new n,S=h.fork(f);function m(v){return function(...E){let I=v.apply(this,E);return function(...y){return y[1]=w(y[1]),I.apply(this,y)}}}function C(v){return function(...E){return function(...I){return I[1]=M(I[1]),v.apply(this,E).apply(this,I)}}}function w(v){return function(...E){return d.run(v,this,E)}}function M(v,E=!1){if(typeof v!="function")return v;let I=function(){if(r[t.symbol("useFakeTimersCalled")]===!0&&v&&!v.isFakeAsync){let y=r[r.__symbol__("fakeAsyncTest")];y&&typeof y.fakeAsync=="function"&&(v=y.fakeAsync(v))}return f.isTestFunc=E,S.run(v,null,arguments)};return Object.defineProperty(I,"length",{configurable:!0,writable:!0,enumerable:!1}),I.length=v.length,I}["describe","xdescribe","fdescribe"].forEach(v=>{let E=e[v];e[r.__symbol__(v)]||(e[r.__symbol__(v)]=E,e[v]=function(...I){return I[1]=w(I[1]),E.apply(this,I)},e[v].each=m(E.each))}),e.describe.only=e.fdescribe,e.describe.skip=e.xdescribe,["it","xit","fit","test","xtest"].forEach(v=>{let E=e[v];e[r.__symbol__(v)]||(e[r.__symbol__(v)]=E,e[v]=function(...I){return I[1]=M(I[1],!0),E.apply(this,I)},e[v].each=C(E.each),e[v].todo=E.todo,e[v].failing=E.failing)}),e.it.only=e.fit,e.it.skip=e.xit,e.test.only=e.fit,e.test.skip=e.xit,["beforeEach","afterEach","beforeAll","afterAll"].forEach(v=>{let E=e[v];e[r.__symbol__(v)]||(e[r.__symbol__(v)]=E,e[v]=function(...I){return I[0]=M(I[0]),E.apply(this,I)})}),r.patchJestObject=function(E,I=!1){function y(){return!!r.current.get("FakeAsyncTestZoneSpec")}function l(){let i=r.current.get("ProxyZoneSpec");return i&&i.isTestFunc}E[t.symbol("fakeTimers")]||(E[t.symbol("fakeTimers")]=!0,t.patchMethod(E,"_checkFakeTimers",i=>function(T,_){return y()?!0:i.apply(T,_)}),t.patchMethod(E,"useFakeTimers",i=>function(T,_){return r[t.symbol("useFakeTimersCalled")]=!0,I||l()?i.apply(T,_):T}),t.patchMethod(E,"useRealTimers",i=>function(T,_){return r[t.symbol("useFakeTimersCalled")]=!1,I||l()?i.apply(T,_):T}),t.patchMethod(E,"setSystemTime",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p&&y())p.setFakeBaseSystemTime(_[0]);else return i.apply(T,_)}),t.patchMethod(E,"getRealSystemTime",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");return p&&y()?p.getRealSystemTime():i.apply(T,_)}),t.patchMethod(E,"runAllTicks",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p)p.flushMicrotasks();else return i.apply(T,_)}),t.patchMethod(E,"runAllTimers",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p)p.flush(100,!0);else return i.apply(T,_)}),t.patchMethod(E,"advanceTimersByTime",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p)p.tick(_[0]);else return i.apply(T,_)}),t.patchMethod(E,"runOnlyPendingTimers",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p)p.flushOnlyPendingTimers();else return i.apply(T,_)}),t.patchMethod(E,"advanceTimersToNextTimer",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p)p.tickToNext(_[0]);else return i.apply(T,_)}),t.patchMethod(E,"clearAllTimers",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");if(p)p.removeAllTimers();else return i.apply(T,_)}),t.patchMethod(E,"getTimerCount",i=>function(T,_){let p=r.current.get("FakeAsyncTestZoneSpec");return p?p.getTimerCount():i.apply(T,_)}))}})}function Kt(s){s.__load_patch("mocha",(e,r)=>{let t=e.Mocha;if(typeof t>"u")return;if(typeof r>"u")throw new Error("Missing Zone.js");let n=r.ProxyZoneSpec,a=r.SyncTestZoneSpec;if(!n)throw new Error("Missing ProxyZoneSpec");if(t.__zone_patch__)throw new Error('"Mocha" has already been patched with "Zone".');t.__zone_patch__=!0;let h=r.current,d=h.fork(new a("Mocha.describe")),f=null,S=h.fork(new n),m={after:e.after,afterEach:e.afterEach,before:e.before,beforeEach:e.beforeEach,describe:e.describe,it:e.it};function C(E,I,y){for(let l=0;l<E.length;l++){let i=E[l];typeof i=="function"&&(E[l]=i.length===0?I(i):y(i),E[l].toString=function(){return i.toString()})}return E}function w(E){return C(E,function(y){return function(){return d.run(y,this,arguments)}})}function M(E){return C(E,function(l){return function(){return f.run(l,this)}},function(l){return function(i){return f.run(l,this,[i])}})}function v(E){return C(E,function(l){return function(){return S.run(l,this)}},function(l){return function(i){return S.run(l,this,[i])}})}e.describe=e.suite=function(){return m.describe.apply(this,w(arguments))},e.xdescribe=e.suite.skip=e.describe.skip=function(){return m.describe.skip.apply(this,w(arguments))},e.describe.only=e.suite.only=function(){return m.describe.only.apply(this,w(arguments))},e.it=e.specify=e.test=function(){return m.it.apply(this,M(arguments))},e.xit=e.xspecify=e.it.skip=function(){return m.it.skip.apply(this,M(arguments))},e.it.only=e.test.only=function(){return m.it.only.apply(this,M(arguments))},e.after=e.suiteTeardown=function(){return m.after.apply(this,v(arguments))},e.afterEach=e.teardown=function(){return m.afterEach.apply(this,M(arguments))},e.before=e.suiteSetup=function(){return m.before.apply(this,v(arguments))},e.beforeEach=e.setup=function(){return m.beforeEach.apply(this,M(arguments))},((E,I)=>{t.Runner.prototype.runTest=function(y){r.current.scheduleMicroTask("mocha.forceTask",()=>{E.call(this,y)})},t.Runner.prototype.run=function(y){return this.on("test",l=>{f=h.fork(new n)}),this.on("fail",(l,i)=>{let T=f&&f.get("ProxyZoneSpec");if(T&&i)try{i.message+=T.getAndClearPendingTasksInfo()}catch{}}),I.call(this,y)}})(t.Runner.prototype.runTest,t.Runner.prototype.run)})}var en=globalThis;function St(s){return(en.__Zone_symbol_prefix||"__zone_symbol__")+s}var tn=typeof window<"u"&&window||typeof self<"u"&&self||global,Ye=class s{finishCallback;failCallback;static get symbolParentUnresolved(){return St("parentUnresolved")}_pendingMicroTasks=!1;_pendingMacroTasks=!1;_alreadyErrored=!1;_isSync=!1;_existingFinishTimer=null;entryFunction=null;runZone=Zone.current;unresolvedChainedPromiseCount=0;supportWaitUnresolvedChainedPromise=!1;constructor(e,r,t){this.finishCallback=e,this.failCallback=r,this.name="asyncTestZone for "+t,this.properties={AsyncTestZoneSpec:this},this.supportWaitUnresolvedChainedPromise=tn[St("supportWaitUnResolvedChainedPromise")]===!0}isUnresolvedChainedPromisePending(){return this.unresolvedChainedPromiseCount>0}_finishCallbackIfDone(){this._existingFinishTimer!==null&&(clearTimeout(this._existingFinishTimer),this._existingFinishTimer=null),this._pendingMicroTasks||this._pendingMacroTasks||this.supportWaitUnresolvedChainedPromise&&this.isUnresolvedChainedPromisePending()||this.runZone.run(()=>{this._existingFinishTimer=setTimeout(()=>{!this._alreadyErrored&&!(this._pendingMicroTasks||this._pendingMacroTasks)&&this.finishCallback()},0)})}patchPromiseForTest(){if(!this.supportWaitUnresolvedChainedPromise)return;let e=Promise[Zone.__symbol__("patchPromiseForTest")];e&&e()}unPatchPromiseForTest(){if(!this.supportWaitUnresolvedChainedPromise)return;let e=Promise[Zone.__symbol__("unPatchPromiseForTest")];e&&e()}name;properties;onScheduleTask(e,r,t,n){return n.type!=="eventTask"&&(this._isSync=!1),n.type==="microTask"&&n.data&&n.data instanceof Promise&&n.data[s.symbolParentUnresolved]===!0&&this.unresolvedChainedPromiseCount--,e.scheduleTask(t,n)}onInvokeTask(e,r,t,n,a,h){return n.type!=="eventTask"&&(this._isSync=!1),e.invokeTask(t,n,a,h)}onCancelTask(e,r,t,n){return n.type!=="eventTask"&&(this._isSync=!1),e.cancelTask(t,n)}onInvoke(e,r,t,n,a,h,d){this.entryFunction||(this.entryFunction=n);try{return this._isSync=!0,e.invoke(t,n,a,h,d)}finally{this._isSync&&this.entryFunction===n&&this._finishCallbackIfDone()}}onHandleError(e,r,t,n){return e.handleError(t,n)&&(this.failCallback(n),this._alreadyErrored=!0),!1}onHasTask(e,r,t,n){e.hasTask(t,n),r===t&&(n.change=="microTask"?(this._pendingMicroTasks=n.microTask,this._finishCallbackIfDone()):n.change=="macroTask"&&(this._pendingMacroTasks=n.macroTask,this._finishCallbackIfDone()))}};function nn(s){s.AsyncTestZoneSpec=Ye,s.__load_patch("asynctest",(e,r,t)=>{r[t.symbol("asyncTest")]=function(h){return e.jasmine?function(d){d||(d=function(){},d.fail=function(f){throw f}),n(h,this,d,f=>{if(typeof f=="string")return d.fail(new Error(f));d.fail(f)})}:function(){return new Promise((d,f)=>{n(h,this,d,f)})}};function n(a,h,d,f){let S=r.current,m=r.AsyncTestZoneSpec;if(m===void 0)throw new Error("AsyncTestZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/plugins/async-test");let C=r.ProxyZoneSpec;if(!C)throw new Error("ProxyZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/plugins/proxy");let w=C.get();C.assertPresent();let M=r.current.getZoneWith("ProxyZoneSpec"),v=w.getDelegate();return M.parent.run(()=>{let E=new m(()=>{w.getDelegate()==E&&w.setDelegate(v),E.unPatchPromiseForTest(),S.run(()=>{d()})},I=>{w.getDelegate()==E&&w.setDelegate(v),E.unPatchPromiseForTest(),S.run(()=>{f(I)})},"test");w.setDelegate(E),E.patchPromiseForTest()}),r.current.runGuarded(a,h)}})}var $=typeof window=="object"&&window||typeof self=="object"&&self||globalThis.global,me=$.Date;function ge(){if(arguments.length===0){let s=new me;return s.setTime(ge.now()),s}else{let s=Array.prototype.slice.call(arguments);return new me(...s)}}ge.now=function(){let s=Zone.current.get("FakeAsyncTestZoneSpec");return s?s.getFakeSystemTime():me.now.apply(this,arguments)};ge.UTC=me.UTC;ge.parse=me.parse;var le,rn=function(){},Re=(()=>{class s{static nextNodeJSId=1;static nextId=-1;_schedulerQueue=[];_currentTickTime=0;_currentFakeBaseSystemTime=me.now();_currentTickRequeuePeriodicEntries=[];constructor(){}static getNextId(){let r=le.nativeSetTimeout.call($,rn,0);return le.nativeClearTimeout.call($,r),typeof r=="number"?r:s.nextNodeJSId++}getCurrentTickTime(){return this._currentTickTime}getFakeSystemTime(){return this._currentFakeBaseSystemTime+this._currentTickTime}setFakeBaseSystemTime(r){this._currentFakeBaseSystemTime=r}getRealSystemTime(){return me.now()}scheduleFunction(r,t,n){n={args:[],isPeriodic:!1,isRequestAnimationFrame:!1,id:-1,isRequeuePeriodic:!1,...n};let a=n.id<0?s.nextId:n.id;s.nextId=s.getNextId();let d={endTime:this._currentTickTime+t,id:a,func:r,args:n.args,delay:t,isPeriodic:n.isPeriodic,isRequestAnimationFrame:n.isRequestAnimationFrame};n.isRequeuePeriodic&&this._currentTickRequeuePeriodicEntries.push(d);let f=0;for(;f<this._schedulerQueue.length;f++){let S=this._schedulerQueue[f];if(d.endTime<S.endTime)break}return this._schedulerQueue.splice(f,0,d),a}removeScheduledFunctionWithId(r){for(let t=0;t<this._schedulerQueue.length;t++)if(this._schedulerQueue[t].id==r){this._schedulerQueue.splice(t,1);break}}removeAll(){this._schedulerQueue=[]}getTimerCount(){return this._schedulerQueue.length}tickToNext(r=1,t,n){if(this._schedulerQueue.length<r)return;let a=this._currentTickTime,h=this._schedulerQueue[r-1];this.tick(h.endTime-a,t,n)}tick(r=0,t,n){let a=this._currentTickTime+r,h=0;n=Object.assign({processNewMacroTasksSynchronously:!0},n);let d=n.processNewMacroTasksSynchronously?this._schedulerQueue:this._schedulerQueue.slice();if(d.length===0&&t){t(r);return}for(;d.length>0;){this._currentTickRequeuePeriodicEntries=[];let f=d[0];if(a<f.endTime)break;{let S=d.shift();if(!n.processNewMacroTasksSynchronously){let C=this._schedulerQueue.indexOf(S);C>=0&&this._schedulerQueue.splice(C,1)}if(h=this._currentTickTime,this._currentTickTime=S.endTime,t&&t(this._currentTickTime-h),!S.func.apply($,S.isRequestAnimationFrame?[this._currentTickTime]:S.args))break;n.processNewMacroTasksSynchronously||this._currentTickRequeuePeriodicEntries.forEach(C=>{let w=0;for(;w<d.length;w++){let M=d[w];if(C.endTime<M.endTime)break}d.splice(w,0,C)})}}h=this._currentTickTime,this._currentTickTime=a,t&&t(this._currentTickTime-h)}flushOnlyPendingTimers(r){if(this._schedulerQueue.length===0)return 0;let t=this._currentTickTime,n=this._schedulerQueue[this._schedulerQueue.length-1];return this.tick(n.endTime-t,r,{processNewMacroTasksSynchronously:!1}),this._currentTickTime-t}flush(r=20,t=!1,n){return t?this.flushPeriodic(n):this.flushNonPeriodic(r,n)}flushPeriodic(r){if(this._schedulerQueue.length===0)return 0;let t=this._currentTickTime,n=this._schedulerQueue[this._schedulerQueue.length-1];return this.tick(n.endTime-t,r),this._currentTickTime-t}flushNonPeriodic(r,t){let n=this._currentTickTime,a=0,h=0;for(;this._schedulerQueue.length>0;){if(h++,h>r)throw new Error("flush failed after reaching the limit of "+r+" tasks. Does your code use a polling timeout?");if(this._schedulerQueue.filter(S=>!S.isPeriodic&&!S.isRequestAnimationFrame).length===0)break;let d=this._schedulerQueue.shift();if(a=this._currentTickTime,this._currentTickTime=d.endTime,t&&t(this._currentTickTime-a),!d.func.apply($,d.args))break}return this._currentTickTime-n}}return s})(),Ke=class s{trackPendingRequestAnimationFrame;macroTaskOptions;static assertInZone(){if(Zone.current.get("FakeAsyncTestZoneSpec")==null)throw new Error("The code should be running in the fakeAsync zone to call this function")}_scheduler=new Re;_microtasks=[];_lastError=null;_uncaughtPromiseErrors=Promise[Zone.__symbol__("uncaughtPromiseErrors")];pendingPeriodicTimers=[];pendingTimers=[];patchDateLocked=!1;constructor(e,r=!1,t){this.trackPendingRequestAnimationFrame=r,this.macroTaskOptions=t,this.name="fakeAsyncTestZone for "+e,this.macroTaskOptions||(this.macroTaskOptions=$[Zone.__symbol__("FakeAsyncTestMacroTask")])}_fnAndFlush(e,r){return(...t)=>(e.apply($,t),this._lastError===null?(r.onSuccess!=null&&r.onSuccess.apply($),this.flushMicrotasks()):r.onError!=null&&r.onError.apply($),this._lastError===null)}static _removeTimer(e,r){let t=e.indexOf(r);t>-1&&e.splice(t,1)}_dequeueTimer(e){return()=>{s._removeTimer(this.pendingTimers,e)}}_requeuePeriodicTimer(e,r,t,n){return()=>{this.pendingPeriodicTimers.indexOf(n)!==-1&&this._scheduler.scheduleFunction(e,r,{args:t,isPeriodic:!0,id:n,isRequeuePeriodic:!0})}}_dequeuePeriodicTimer(e){return()=>{s._removeTimer(this.pendingPeriodicTimers,e)}}_setTimeout(e,r,t,n=!0){let a=this._dequeueTimer(Re.nextId),h=this._fnAndFlush(e,{onSuccess:a,onError:a}),d=this._scheduler.scheduleFunction(h,r,{args:t,isRequestAnimationFrame:!n});return n&&this.pendingTimers.push(d),d}_clearTimeout(e){s._removeTimer(this.pendingTimers,e),this._scheduler.removeScheduledFunctionWithId(e)}_setInterval(e,r,t){let n=Re.nextId,a={onSuccess:null,onError:this._dequeuePeriodicTimer(n)},h=this._fnAndFlush(e,a);return a.onSuccess=this._requeuePeriodicTimer(h,r,t,n),this._scheduler.scheduleFunction(h,r,{args:t,isPeriodic:!0}),this.pendingPeriodicTimers.push(n),n}_clearInterval(e){s._removeTimer(this.pendingPeriodicTimers,e),this._scheduler.removeScheduledFunctionWithId(e)}_resetLastErrorAndThrow(){let e=this._lastError||this._uncaughtPromiseErrors[0];throw this._uncaughtPromiseErrors.length=0,this._lastError=null,e}getCurrentTickTime(){return this._scheduler.getCurrentTickTime()}getFakeSystemTime(){return this._scheduler.getFakeSystemTime()}setFakeBaseSystemTime(e){this._scheduler.setFakeBaseSystemTime(e)}getRealSystemTime(){return this._scheduler.getRealSystemTime()}static patchDate(){$[Zone.__symbol__("disableDatePatching")]||$.Date!==ge&&($.Date=ge,ge.prototype=me.prototype,s.checkTimerPatch())}static resetDate(){$.Date===ge&&($.Date=me)}static checkTimerPatch(){if(!le)throw new Error("Expected timers to have been patched.");$.setTimeout!==le.setTimeout&&($.setTimeout=le.setTimeout,$.clearTimeout=le.clearTimeout),$.setInterval!==le.setInterval&&($.setInterval=le.setInterval,$.clearInterval=le.clearInterval)}lockDatePatch(){this.patchDateLocked=!0,s.patchDate()}unlockDatePatch(){this.patchDateLocked=!1,s.resetDate()}tickToNext(e=1,r,t={processNewMacroTasksSynchronously:!0}){e<=0||(s.assertInZone(),this.flushMicrotasks(),this._scheduler.tickToNext(e,r,t),this._lastError!==null&&this._resetLastErrorAndThrow())}tick(e=0,r,t={processNewMacroTasksSynchronously:!0}){s.assertInZone(),this.flushMicrotasks(),this._scheduler.tick(e,r,t),this._lastError!==null&&this._resetLastErrorAndThrow()}flushMicrotasks(){s.assertInZone();let e=()=>{(this._lastError!==null||this._uncaughtPromiseErrors.length)&&this._resetLastErrorAndThrow()};for(;this._microtasks.length>0;){let r=this._microtasks.shift();r.func.apply(r.target,r.args)}e()}flush(e,r,t){s.assertInZone(),this.flushMicrotasks();let n=this._scheduler.flush(e,r,t);return this._lastError!==null&&this._resetLastErrorAndThrow(),n}flushOnlyPendingTimers(e){s.assertInZone(),this.flushMicrotasks();let r=this._scheduler.flushOnlyPendingTimers(e);return this._lastError!==null&&this._resetLastErrorAndThrow(),r}removeAllTimers(){s.assertInZone(),this._scheduler.removeAll(),this.pendingPeriodicTimers=[],this.pendingTimers=[]}getTimerCount(){return this._scheduler.getTimerCount()+this._microtasks.length}name;properties={FakeAsyncTestZoneSpec:this};onScheduleTask(e,r,t,n){switch(n.type){case"microTask":let a=n.data&&n.data.args,h;if(a){let d=n.data.cbIdx;typeof a.length=="number"&&a.length>d+1&&(h=Array.prototype.slice.call(a,d+1))}this._microtasks.push({func:n.invoke,args:h,target:n.data&&n.data.target});break;case"macroTask":switch(n.source){case"setTimeout":n.data.handleId=this._setTimeout(n.invoke,n.data.delay,Array.prototype.slice.call(n.data.args,2));break;case"setImmediate":n.data.handleId=this._setTimeout(n.invoke,0,Array.prototype.slice.call(n.data.args,1));break;case"setInterval":n.data.handleId=this._setInterval(n.invoke,n.data.delay,Array.prototype.slice.call(n.data.args,2));break;case"XMLHttpRequest.send":throw new Error("Cannot make XHRs from within a fake async test. Request URL: "+n.data.url);case"requestAnimationFrame":case"webkitRequestAnimationFrame":case"mozRequestAnimationFrame":n.data.handleId=this._setTimeout(n.invoke,16,n.data.args,this.trackPendingRequestAnimationFrame);break;default:let d=this.findMacroTaskOption(n);if(d){let f=n.data&&n.data.args,S=f&&f.length>1?f[1]:0,m=d.callbackArgs?d.callbackArgs:f;d.isPeriodic?(n.data.handleId=this._setInterval(n.invoke,S,m),n.data.isPeriodic=!0):n.data.handleId=this._setTimeout(n.invoke,S,m);break}throw new Error("Unknown macroTask scheduled in fake async test: "+n.source)}break;case"eventTask":n=e.scheduleTask(t,n);break}return n}onCancelTask(e,r,t,n){switch(n.source){case"setTimeout":case"requestAnimationFrame":case"webkitRequestAnimationFrame":case"mozRequestAnimationFrame":return this._clearTimeout(n.data.handleId);case"setInterval":return this._clearInterval(n.data.handleId);default:let a=this.findMacroTaskOption(n);if(a){let h=n.data.handleId;return a.isPeriodic?this._clearInterval(h):this._clearTimeout(h)}return e.cancelTask(t,n)}}onInvoke(e,r,t,n,a,h,d){try{return s.patchDate(),e.invoke(t,n,a,h,d)}finally{this.patchDateLocked||s.resetDate()}}findMacroTaskOption(e){if(!this.macroTaskOptions)return null;for(let r=0;r<this.macroTaskOptions.length;r++){let t=this.macroTaskOptions[r];if(t.source===e.source)return t}return null}onHandleError(e,r,t,n){return this._lastError=n,!1}},ee=null;function je(){return Zone&&Zone.ProxyZoneSpec}var Me=null,Pt=null;function vt(){ee&&ee.unlockDatePatch(),ee=null,je()?.get()?.resetDelegate(),Me?.resetDelegate()}function sn(s,e={}){let{flush:r=!0}=e,t=function(...n){let a=je();if(!a)throw new Error("ProxyZoneSpec is needed for the fakeAsync() test helper but could not be found. Make sure that your environment includes zone-testing.js");let h=a.assertPresent();if(Zone.current.get("FakeAsyncTestZoneSpec"))throw new Error("fakeAsync() calls can not be nested");try{if(!ee){let S=Zone&&Zone.FakeAsyncTestZoneSpec;if(h.getDelegate()instanceof S)throw new Error("fakeAsync() calls can not be nested");ee=new S}let d,f=h.getDelegate();h.setDelegate(ee),ee.lockDatePatch();try{d=s.apply(this,n),r?ee.flush(20,!0):wt()}finally{h.setDelegate(f)}if(!r){if(ee.pendingPeriodicTimers.length>0)throw new Error(`${ee.pendingPeriodicTimers.length} periodic timer(s) still in the queue.`);if(ee.pendingTimers.length>0)throw new Error(`${ee.pendingTimers.length} timer(s) still in the queue.`)}return d}finally{vt()}};return t.isFakeAsync=!0,t}function xe(){if(ee==null&&(ee=Zone.current.get("FakeAsyncTestZoneSpec"),ee==null))throw new Error("The code should be running in the fakeAsync zone to call this function");return ee}function on(s=0,e=!1){xe().tick(s,null,e)}function cn(s){return xe().flush(s)}function an(){let s=xe();s.pendingPeriodicTimers,s.pendingPeriodicTimers.length=0}function un(s){return function(...r){let t=je();if(t===void 0)throw new Error("ProxyZoneSpec is needed for the withProxyZone() test helper but could not be found. Make sure that your environment includes zone-testing.js");return(t.get()!==void 0?Zone.current:ln()).run(s,this,r)}}function ln(){let s=je();if(s===void 0)throw new Error("ProxyZoneSpec is needed for withProxyZone but could not be found. Make sure that your environment includes zone-testing.js");return Me===null&&(Me=new s),Pt=Zone.root.fork(Me),Pt}function wt(){xe().flushMicrotasks()}function hn(s){s.FakeAsyncTestZoneSpec=Ke,s.__load_patch("fakeasync",(e,r,t)=>{r[t.symbol("fakeAsyncTest")]={resetFakeAsyncZone:vt,flushMicrotasks:wt,discardPeriodicTasks:an,tick:on,flush:cn,fakeAsync:sn,withProxyZone:un}},!0),le={setTimeout:$.setTimeout,setInterval:$.setInterval,clearTimeout:$.clearTimeout,clearInterval:$.clearInterval,nativeSetTimeout:$[s.__symbol__("setTimeout")],nativeClearTimeout:$[s.__symbol__("clearTimeout")]},Re.nextId=Re.getNextId()}function fn(s){let r={},t="__creationTrace__",n="STACKTRACE TRACKING",a="__SEP_TAG__",h=a+"@[native]";class d{error=w();timestamp=new Date}function f(){return new Error(n)}function S(){try{throw f()}catch(i){return i}}let m=f(),C=S(),w=m.stack?f:C.stack?S:f;function M(i){return i.stack?i.stack.split(`
`):[]}function v(i,T){let _=M(T);for(let p=0;p<_.length;p++){let A=_[p];r.hasOwnProperty(A)||i.push(_[p])}}function E(i,T){let _=[T?T.trim():""];if(i){let p=new Date().getTime();for(let A=0;A<i.length;A++){let P=i[A],V=P.timestamp,x=`____________________Elapsed ${p-V.getTime()} ms; At: ${V}`;x=x.replace(/[^\w\d]/g,"_"),_.push(h.replace(a,x)),v(_,P.error),p=V.getTime()}}return _.join(`
`)}function I(){return Error.stackTraceLimit>0}s.longStackTraceZoneSpec={name:"long-stack-trace",longStackTraceLimit:10,getLongStackTrace:function(i){if(!i)return;let T=i[s.__symbol__("currentTaskTrace")];return T?E(T,i.stack):i.stack},onScheduleTask:function(i,T,_,p){if(I()){let A=s.currentTask,P=A&&A.data&&A.data[t]||[];P=[new d].concat(P),P.length>this.longStackTraceLimit&&(P.length=this.longStackTraceLimit),p.data||(p.data={}),p.type==="eventTask"&&(p.data={...p.data}),p.data[t]=P}return i.scheduleTask(_,p)},onHandleError:function(i,T,_,p){if(I()){let A=s.currentTask||p.task;if(p instanceof Error&&A){let P=E(A.data&&A.data[t],p.stack);try{p.stack=p.longStack=P}catch{}}}return i.handleError(_,p)}};function y(i,T){T>0&&(i.push(M(new d().error)),y(i,T-1))}function l(){if(!I())return;let i=[];y(i,2);let T=i[0],_=i[1];for(let p=0;p<T.length;p++){let A=T[p];if(A.indexOf(n)==-1){let P=A.match(/^\s*at\s+/);if(P){h=P[0]+a+" (http://localhost)";break}}}for(let p=0;p<T.length;p++){let A=T[p],P=_[p];if(A===P)r[A]=!0;else break}}l()}var et=class s{defaultSpecDelegate;name="ProxyZone";_delegateSpec=null;properties={ProxyZoneSpec:this};propertyKeys=null;lastTaskState=null;isNeedToTriggerHasTask=!1;tasks=[];static get(){return Zone.current.get("ProxyZoneSpec")}static isLoaded(){return s.get()instanceof s}static assertPresent(){let e=s.get();if(e===void 0)throw new Error("Expected to be running in 'ProxyZone', but it was not found.");return e}constructor(e=null){this.defaultSpecDelegate=e,this.setDelegate(e)}setDelegate(e){let r=this._delegateSpec!==e;this._delegateSpec=e,this.propertyKeys&&this.propertyKeys.forEach(t=>delete this.properties[t]),this.propertyKeys=null,e&&e.properties&&(this.propertyKeys=Object.keys(e.properties),this.propertyKeys.forEach(t=>this.properties[t]=e.properties[t])),r&&this.lastTaskState&&(this.lastTaskState.macroTask||this.lastTaskState.microTask)&&(this.isNeedToTriggerHasTask=!0)}getDelegate(){return this._delegateSpec}resetDelegate(){this.getDelegate(),this.setDelegate(this.defaultSpecDelegate)}tryTriggerHasTask(e,r,t){this.isNeedToTriggerHasTask&&this.lastTaskState&&(this.isNeedToTriggerHasTask=!1,this.onHasTask(e,r,t,this.lastTaskState))}removeFromTasks(e){if(this.tasks){for(let r=0;r<this.tasks.length;r++)if(this.tasks[r]===e){this.tasks.splice(r,1);return}}}getAndClearPendingTasksInfo(){if(this.tasks.length===0)return"";let r="--Pending async tasks are: ["+this.tasks.map(t=>{let n=t.data&&Object.keys(t.data).map(a=>a+":"+t.data[a]).join(",");return`type: ${t.type}, source: ${t.source}, args: {${n}}`})+"]";return this.tasks=[],r}onFork(e,r,t,n){return this._delegateSpec&&this._delegateSpec.onFork?this._delegateSpec.onFork(e,r,t,n):e.fork(t,n)}onIntercept(e,r,t,n,a){return this._delegateSpec&&this._delegateSpec.onIntercept?this._delegateSpec.onIntercept(e,r,t,n,a):e.intercept(t,n,a)}onInvoke(e,r,t,n,a,h,d){return this.tryTriggerHasTask(e,r,t),this._delegateSpec&&this._delegateSpec.onInvoke?this._delegateSpec.onInvoke(e,r,t,n,a,h,d):e.invoke(t,n,a,h,d)}onHandleError(e,r,t,n){return this._delegateSpec&&this._delegateSpec.onHandleError?this._delegateSpec.onHandleError(e,r,t,n):e.handleError(t,n)}onScheduleTask(e,r,t,n){return n.type!=="eventTask"&&this.tasks.push(n),this._delegateSpec&&this._delegateSpec.onScheduleTask?this._delegateSpec.onScheduleTask(e,r,t,n):e.scheduleTask(t,n)}onInvokeTask(e,r,t,n,a,h){return n.type!=="eventTask"&&this.removeFromTasks(n),this.tryTriggerHasTask(e,r,t),this._delegateSpec&&this._delegateSpec.onInvokeTask?this._delegateSpec.onInvokeTask(e,r,t,n,a,h):e.invokeTask(t,n,a,h)}onCancelTask(e,r,t,n){return n.type!=="eventTask"&&this.removeFromTasks(n),this.tryTriggerHasTask(e,r,t),this._delegateSpec&&this._delegateSpec.onCancelTask?this._delegateSpec.onCancelTask(e,r,t,n):e.cancelTask(t,n)}onHasTask(e,r,t,n){this.lastTaskState=n,this._delegateSpec&&this._delegateSpec.onHasTask?this._delegateSpec.onHasTask(e,r,t,n):e.hasTask(t,n)}};function dn(s){s.ProxyZoneSpec=et}function Tn(s){class e{runZone=s.current;constructor(t){this.name="syncTestZone for "+t}name;onScheduleTask(t,n,a,h){switch(h.type){case"microTask":case"macroTask":throw new Error(`Cannot call ${h.source} from within a sync test (${this.name}).`);case"eventTask":h=t.scheduleTask(a,h);break}return h}}s.SyncTestZoneSpec=e}function pn(s){s.__load_patch("promisefortest",(e,r,t)=>{let n=t.symbol("state"),a=null,h=t.symbol("parentUnresolved");Promise[t.symbol("patchPromiseForTest")]=function(){let f=Promise[r.__symbol__("ZonePromiseThen")];f||(f=Promise[r.__symbol__("ZonePromiseThen")]=Promise.prototype.then,Promise.prototype.then=function(){let S=f.apply(this,arguments);if(this[n]===a){let m=r.current.get("AsyncTestZoneSpec");m&&(m.unresolvedChainedPromiseCount++,S[h]=!0)}return S})},Promise[t.symbol("unPatchPromiseForTest")]=function(){let f=Promise[r.__symbol__("ZonePromiseThen")];f&&(Promise.prototype.then=f,Promise[r.__symbol__("ZonePromiseThen")]=void 0)}})}function _n(s){fn(s),dn(s),Tn(s),Jt(s),Yt(s),Kt(s),nn(s),hn(s),pn(s)}_n(Zone);
